(function(e){function t(t){for(var s,o,i=t[0],l=t[1],c=t[2],d=0,_=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&_.push(n[o][0]),n[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(_.length)_.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,i=1;i<a.length;i++){var l=a[i];0!==n[l]&&(s=!1)}s&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var s={},n={app:0},r=[];function o(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=s,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(a,s,function(t){return e[t]}.bind(null,s));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"07d3":function(e,t,a){},"2b9b":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var s=a("2b0e"),n=a("69b4"),r=(a("f9e3"),a("2dd8"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[e._m(0),a("hr"),a("button",{directives:[{name:"v-b-toggle",rawName:"v-v-b-toggle.instructions",modifiers:{instructions:!0}}],staticClass:"btn-link"},[e._v("Instructions")]),a("b-collapse",{staticClass:"mt-2",attrs:{id:"instructions"}},[a("b-card",[a("div",{staticClass:"card-text"},[e._v("\n            LocalZoom is a tool for generating region association plots via the web browser.\n            It can be used on any Tabix-indexed file (including those stored on your hard drive), which\n            makes it useful for sensitive or confidential data. If you are comfortable uploading\n            your data to a server, consider the "),a("a",{attrs:{href:"https://my.locuszoom.org"}},[e._v("my.locuszoom.org")]),e._v(" upload service instead,\n            which provides additional annotation features and does not require you to compress or index your data.\n            (note that the upload service is limited to files <= 1GB)\n            LocalZoom relies on four assumptions:\n            "),a("ol",[a("li",[e._v("Your data is a text-based, tab-delimited file that has been stored in a compressed format,\n              and "),a("a",{attrs:{href:"http://www.htslib.org/doc/tabix.html"}},[e._v("indexed using Tabix")]),e._v(". The\n              index file must be in the same path, with the suffix "),a("em",[e._v(".tbi")])]),a("li",[e._v("The data is hosted in a place that is reachable by web browser (eg local files\n              or a service such as S3)\n              ")]),a("li",[e._v("If using a remote URL, the host location must support byte range requests. ("),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Range_requests#Checking_if_a_server_supports_partial_requests"}},[e._v("how\n                to check")]),e._v(")\n              ")]),a("li",[e._v("Your file contains all of the information required to draw a plot. Chromosome, position,\n              ref, and alt alleles can be specified as either individual columns, or a SNP\n              marker (eg "),a("code",[e._v("chr:pos_ref/alt")]),e._v("); there must also be a p-value\n              (or -log10 pvalue) for each SNP as a separate column. Beta, SE, and alt allele\n              frequency information are optional, but will be used on the plot if provided.\n              "),a("em",[e._v("Client-side plots cannot be generated from rsIDs.")])])]),a("p",[e._v("This service is designed to efficiently fetch only the data needed for the plot\n            region of interest. Therefore, it cannot generate summary views that would require\n            processing the entire file (eg Manhattan plots).\n            ")]),a("p",[e._v("\n              LD and overlay information is based on a specific build ("),a("strong",[e._v("build GRCh37")]),e._v("\n              or "),a("strong",[e._v("build GRCh38")]),e._v(" are supported). Exercise caution when interpreting\n              plots based on a GWAS with positions from a different build.\n            ")]),a("p",[e._v("\n              Credible sets are\n              "),a("a",{attrs:{href:"https://github.com/statgen/gwas-credible-sets/"}},[e._v("calculated")]),e._v(" based on the\n              p-values for the displayed region. At the moment this tool does not support\n              uploading your own custom credible set annotations.\n            ")])])])],1)],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("gwas-toolbar",{attrs:{study_names:e.study_names,max_studies:4},on:{"config-ready":e.receiveAssocOptions,"select-range":e.updateRegion}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("plot-panes",{ref:"plotWidget",attrs:{dynamic_urls:!0,assoc_layout:e.base_assoc_layout,assoc_sources:e.base_assoc_sources,study_names:e.study_names,has_credible_sets:e.has_credible_sets,build:e.build,chr:e.chr,start:e.start,end:e.end},on:{"plot-created":e.activateMetrics}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("footer",{staticStyle:{"text-align":"center"}},[e._v("\n        © Copyright "+e._s((new Date).getFullYear())+" "),a("a",{attrs:{href:"https://github.com/statgen"}},[e._v("The University of Michigan\n        Center for Statistical Genetics")]),a("br")])])])])}),o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h1",[a("strong",[e._v("LocalZoom: Plot your own data with LocusZoom.js")])])}],i=(a("9d18"),a("5843")),l=a("205f"),c=a("39ba"),u=(a("8e6e"),a("2397"),a("f559"),a("456d"),a("bd86")),d=a("75fc"),_=(a("ac6a"),a("8615"),a("a481"),a("c5f6"),a("ee1d"),a("d225")),p=a("b0b4"),f=a("4e2b"),h=a("308d"),v=a("6bb5"),m=(a("0d6d"),a("ef2a")),b=a("a8a4"),g=a("1ccd"),y="https://portaldev.sph.umich.edu/api/v1/",w="https://portaldev.sph.umich.edu/ld/",C=/^(?:chr)?(\w+)\s*:\s*(\d+)$/,x=/^(?:chr)?(\w+)\s*:\s*(\d+)-(\d+)$/,k=a("768b"),S=(a("28a5"),a("7872"),a("4917"),a("7cdf"),a("5df3"),a("4f7f"),new Set(["",".","NA","N/A","n/a","nan","-nan","NaN","-NaN","null","NULL","None",null])),P=/^(?:chr)?([a-zA-Z0-9]+?)[_:-](\d+)[_:|-]?(\w+)?[/_:|-]?([^_]+)?_?(.*)?/,O=/([\d.-]+)([\sxeE]*)([0-9-]*)/;function A(e){return Number.isInteger(e)}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e.map((function(e){return t.has(e)?a:e}))}function E(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e.match(P);if(a)return a.slice(1);if(t)return null;throw new Error("Could not understand marker format. Must be of format chr:pos or chr:pos_ref/alt")}function q(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null===e)return e;var a=+e;if(t)return a;if(a<0||a>1)throw new Error("p value is not in the allowed range");if(0===a){if("0"===e)return 1/0;var s=e.match(O),n=Object(k["a"])(s,4),r=n[1],o=n[3];return r=+r,o=""!==o?+o:0,0===r?1/0:-(Math.log10(+r)+ +o)}return-Math.log10(a)}function N(e){var t,a=e.freq,s=e.allele_count,n=e.n_samples,r=e.is_alt_effect,o=void 0===r||r;if(void 0!==a&&void 0!==s)throw new Error("Frequency and allele count options are mutually exclusive");if(void 0===a&&(S.has(s)||S.has(n)))return null;if(void 0===a&&void 0!==s)t=+s/+n/2;else{if(S.has(a))return null;t=+a}if(t<0||t>1)throw new Error("Allele frequency is not in the allowed range");return o?t:1-t}function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.marker_col,a=e.chrom_col,s=e.pos_col,n=e.ref_col,r=e.alt_col,o=e.rsid_col,i=e.pvalue_col,l=e.beta_col,c=e.stderr_beta_col,u=e.allele_freq_col,d=e.allele_count_col,_=e.n_samples_col,p=e.is_alt_effect,f=void 0===p||p,h=e.is_neg_log_pvalue,v=void 0!==h&&h,m=e.delimiter,b=void 0===m?"\t":m;if(A(t)&&A(a)&&A(s))throw new Error("Must specify either marker OR chr + pos");if(!(A(t)||A(a)&&A(s)))throw new Error("Must specify how to locate marker");if(A(d)&&A(u))throw new Error("Allele count and frequency options are mutually exclusive");if(A(d)&&!A(_))throw new Error("To calculate allele frequency from counts, you must also provide n_samples");return function(e){var p,h,m,g,y,w,C,x=e.split(b),P=null,O=null,j=null,L=null;if(A(t)){var $=E(x[t-1],!1),R=Object(k["a"])($,4);p=R[0],h=R[1],m=R[2],g=R[3]}else{if(!A(a)||!A(s))throw new Error("Must specify all fields required to identify the variant");p=x[a-1].replace(/^chr/g,""),h=x[s-1]}if(p=p.toUpperCase(),p.startsWith("RS"))throw new Error('Invalid chromosome specified: value "'.concat(p,'" is an rsID'));A(n)&&(m=x[n-1]),A(r)&&(g=x[r-1]),A(o)&&(P=x[o-1]),S.has(m)&&(m=null),S.has(g)&&(g=null),S.has(P)?P=null:P&&(P=P.toLowerCase(),P.startsWith("rs")||(P="rs".concat(P)));var T=q(x[i-1],v);m=m||null,g=g||null,A(u)&&(y=x[u-1]),A(d)&&(w=x[d-1],C=x[_-1]),A(l)&&(O=x[l-1],O=S.has(O)?null:+O),A(c)&&(j=x[c-1],j=S.has(j)?null:+j),(u||d)&&(L=N({freq:y,allele_count:w,n_samples:C,is_alt_effect:f}));var B=m&&g?"_".concat(m,"/").concat(g):"";return{chromosome:p,position:+h,ref_allele:m?m.toUpperCase():null,alt_allele:g?g.toUpperCase():null,variant:"".concat(p,":").concat(h).concat(B),rsid:P,log_pvalue:T,beta:O,stderr_beta:j,alt_allele_freq:L}}}L({chrom_col:1,pos_col:2,ref_col:3,alt_col:4,pvalue_col:5,beta_col:6,stderr_beta_col:7,is_neg_log_pvalue:!0,delimiter:"\t"});function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(Object(a),!0).forEach((function(t){Object(u["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e){var t=B();return function(){var a,s=Object(v["a"])(e);if(t){var n=Object(v["a"])(this).constructor;a=Reflect.construct(s,arguments,n)}else a=s.apply(this,arguments);return Object(h["a"])(this,a)}}function B(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}m["a"].use(g["a"]);var z=Object.freeze({chr:"chrom",start:"start",end:"end"}),G=function(e){Object(f["a"])(a,e);var t=T(a);function a(){return Object(_["a"])(this,a),t.apply(this,arguments)}return Object(p["a"])(a,[{key:"parseInit",value:function(e){this.params=e.params,this.parser=L(this.params),this.reader=e.tabix_reader}},{key:"getCacheKey",value:function(e,t,a){return[e.chr,e.start,e.end].join("_")}},{key:"fetchRequest",value:function(e,t,a){var s=this;return new Promise((function(t,a){s.reader.fetch(e.chr,e.start,e.end,(function(e,s){s&&a(new Error("Could not read requested region. This may indicate an error with the .tbi index.")),t(e)}))}))}},{key:"normalizeResponse",value:function(e){return e.map(this.parser).filter((function(e){return!Number.isNaN(e.log_pvalue)}))}}]),a}(b["AssociationLZ"]);function M(e){return e.replace(/[^A-Za-z0-9_]/g,"_")}function D(e){var t,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{credible_sets:!1,gwas_catalog:!0},n=[],r=M(e),o={assoc:"assoc_".concat(r),credset:"credset_".concat(r),catalog:"catalog"},i=m["a"].Layouts.get("panel","association",{id:"association_".concat(r),title:{text:e},height:275,namespace:o}),l=i.data_layers[2];l.label={text:"{{#if {{namespace[assoc]}}rsid}}{{{{namespace[assoc]}}rsid}}{{#else}}{{{{namespace[assoc]}}variant}}{{/if}}",spacing:12,lines:{style:{"stroke-width":"2px",stroke:"#333333","stroke-dasharray":"2px 2px"}},filters:[{field:"lz_show_label",operator:"=",value:!0}],style:{"font-weight":"bold"}},l.tooltip=m["a"].Layouts.get("tooltip","standard_association_with_label",{namespace:o});var c=l.tooltip;c.html+="{{#if {{namespace[assoc]}}beta|is_numeric}}<br>&beta;: <strong>{{{{namespace[assoc]}}beta|scinotation|htmlescape}}</strong>{{/if}}",c.html+="{{#if {{namespace[assoc]}}stderr_beta|is_numeric}}<br>SE (&beta;): <strong>{{{{namespace[assoc]}}stderr_beta|scinotation|htmlescape}}</strong>{{/if}}",c.html+="{{#if {{namespace[assoc]}}alt_allele_freq|is_numeric}}<br>Alt. freq: <strong>{{{{namespace[assoc]}}alt_allele_freq|scinotation|htmlescape}} </strong>{{/if}}",c.html+='{{#if {{namespace[assoc]}}rsid}}<br>rsID: <a href="https://www.ncbi.nlm.nih.gov/snp/{{{{namespace[assoc]}}rsid|htmlescape}}" target="_blank" rel="noopener">{{{{namespace[assoc]}}rsid|htmlescape}}</a>{{/if}}';var u=[];Object.values(s).some((function(e){return!!e}))&&u.push({type:"display_options",custom_event_name:"widget_association_display_options_choice",position:"right",color:"blue",button_html:"Display options...",button_title:"Control how plot items are displayed",layer_name:"associationpvalues",default_config_display_name:"Default view",options:[]});var _=["{{namespace[assoc]}}rsid","{{namespace[assoc]}}beta","{{namespace[assoc]}}stderr_beta","{{namespace[assoc]}}alt_allele_freq"];if(s.credible_sets){var p,f=m["a"].Layouts.get("panel","association_credible_set",{namespace:o});(p=u[0].options).push.apply(p,Object(d["a"])(f.toolbar.widgets.pop().options)),_.push("{{namespace[credset]}}posterior_prob","{{namespace[credset]}}contrib_fraction","{{namespace[credset]}}is_member"),c.html+="{{#if {{namespace[credset]}}posterior_prob}}<br>Posterior probability: <strong>{{{{namespace[credset]}}posterior_prob|scinotation}}{{/if}}</strong><br>"}if(s.gwas_catalog){var h,v=m["a"].Layouts.get("panel","association_catalog",{namespace:o});(h=u[0].options).push.apply(h,Object(d["a"])(v.toolbar.widgets.pop().options)),_.push("{{namespace[catalog]}}rsid","{{namespace[catalog]}}trait","{{namespace[catalog]}}log_pvalue"),c.html+='{{#if {{namespace[catalog]}}rsid}}<br><a href="https://www.ebi.ac.uk/gwas/search?query={{{{namespace[catalog]}}rsid}}" target="_new">See hits in GWAS catalog</a>{{/if}}'}return(t=l.fields).push.apply(t,_),(a=i.toolbar.widgets).push.apply(a,u),n.push(m["a"].Layouts.get("panel","association",i)),s.gwas_catalog&&n.push(m["a"].Layouts.get("panel","annotation_catalog",{id:"catalog_".concat(r),namespace:o,toolbar:{widgets:[]},title:{text:"Hits in GWAS Catalog",style:{"font-size":"14px"},x:50}})),n}function W(e,t,a){var s="assoc_".concat(M(e)),n=R(R({},a),{},{id_field:"variant"});return[[s,["TabixAssociationLZ",{tabix_reader:t,params:n}]],["credset_".concat(M(e)),["CredibleSetLZ",{params:{fields:{log_pvalue:"".concat(s,":log_pvalue")},threshold:.95}}]]]}function F(e,t,a,s){s.forEach((function(e){return t.add.apply(t,Object(d["a"])(e))})),a.forEach((function(t){t.y_index=-1;var a=e.addPanel(t);a.addBasicLoader()}))}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[].concat(Object(d["a"])(e),[["catalog",["GwasCatalogLZ",{url:"".concat(y,"annotation/gwascatalog/results/")}]],["ld",["LDLZ2",{url:w,params:{source:"1000G",population:"ALL"}}]],["gene",["GeneLZ",{url:"".concat(y,"annotation/genes/")}]],["recomb",["RecombLZ",{url:"".concat(y,"annotation/recomb/results/")}]],["constraint",["GeneConstraintLZ",{url:"https://gnomad.broadinstitute.org/api/"}]]])}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=[].concat(Object(d["a"])(t),[m["a"].Layouts.get("panel","genes")]),n=Object.assign({state:e,panels:s},a);return m["a"].Layouts.get("plot","standard_association",n)}function Z(e,t){return Object.keys(e).reduce((function(a,s){var n=s.replace(/.*?:/,"");return Object.prototype.hasOwnProperty.call(a,n)&&t&&!s.startsWith(t)||(a[n]=e[s]),a}),{})}function U(e){window.gtag&&(e.on("widget_save_png",(function(){window.gtag("event","save_image",{event_category:"features",event_label:"png"})})),e.on("widget_save_svg",(function(){window.gtag("event","save_image",{event_category:"features",event_label:"svg"})})),e.on("widget_gene_filter_choice",(function(e){window.gtag("event","filter_genes",{event_category:"features",event_label:e.data.choice})})),e.on("widget_association_display_options_choice",(function(e){window.gtag("event","association_display_options",{event_category:"features",event_label:e.data.choice})})),e.on("widget_set_ldpop",(function(e){window.gtag("event","ld_pop",{event_category:"features",event_label:e.data.choice_value})})),e.on("set_ldrefvar",(function(e){window.gtag("event","ld_refvar",{event_category:"features"})})))}m["a"].Adapters.add("TabixAssociationLZ",G);var H=function(e){var t=window.history[e];return function(){for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];var r=t.apply(this,s),o=new Event(e);return o.arguments=s,window.dispatchEvent(o),r}},J=function(){window.gtag&&window.gtag("event","regionview")};window.gtag&&(window.history.pushState=H("pushState"),window.addEventListener("popstate",J),window.addEventListener("pushState",J));var Y=J,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-card",{attrs:{"no-body":""}},[a("b-tabs",{staticClass:"flex-nowrap",staticStyle:{"min-height":"1000px"},attrs:{pills:"",card:"",vertical:"","content-class":"scroll-extra"},on:{input:e.fixDimensions},model:{value:e.selected_tab,callback:function(t){e.selected_tab=t},expression:"selected_tab"}},[a("b-tab",{attrs:{active:e.selected_tab===e.TABS.PLOT,title:"GWAS"}},[e.has_studies?a("lz-plot",{ref:"assoc_plot",attrs:{show_loading:!0,base_layout:e.assoc_layout,base_sources:e.assoc_sources,chr:e.chr,start:e.start,end:e.end,dynamic_urls:e.dynamic_urls},on:{element_clicked:e.onVariantClick,connected:e.receivePlot}}):a("div",{staticClass:"placeholder-plot",staticStyle:{display:"table"}},[a("span",{staticClass:"text-center",staticStyle:{display:"table-cell","vertical-align":"middle"}},[e._v("\n            Please add a GWAS track to continue\n          ")])])],1),a("b-tab",{attrs:{active:e.selected_tab===e.TABS.PHEWAS,disabled:!e.has_studies||!e.allow_phewas}},[a("template",{slot:"title"},[a("span",{attrs:{title:"Only available for build GRCh37 datasets"}},[e._v("PheWAS")])]),a("phewas-maker",{ref:"phewas",attrs:{variant_name:e.tmp_phewas_variant,build:e.build,your_study:e.tmp_phewas_study,your_logpvalue:e.tmp_phewas_logpvalue,allow_render:e.selected_tab===e.TABS.PHEWAS}})],2),a("b-tab",{attrs:{active:e.selected_tab===e.TABS.EXPORT,disabled:!e.has_studies,title:"Export"}},[a("export-data",{attrs:{has_credible_sets:e.has_credible_sets,study_names:e.study_names,table_data:e.table_data},on:{"requested-data":e.subscribeFields}})],1)],1)],1)],1)},X=[],Q=a("6190"),ee=a("f902"),te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("label",[e._v("Select a study:\n        "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.selected_study,expression:"selected_study"}],staticStyle:{width:"20em"},attrs:{disabled:0===e.study_names.length},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selected_study=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[e._v("(none selected)")]),e._l(e.study_names,(function(t,s){return a("option",{key:s,domProps:{value:t}},[e._v(e._s(t))])}))],2)])])]),e.selected_study?a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-info float-right",attrs:{disabled:!e.selected_study},on:{click:e.exportCSV}},[e._v("Download")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("tabulator-table",{attrs:{columns:e.table_config,"initial-sort":[{column:"log_pvalue",dir:"desc"}],table_data:e.table_data,height:"300px"},on:{connected:function(t){e.table=t}}})],1)])]):a("p",[e._v('Please select a study to use the "export" feature.')])])},ae=[],se=(a("6762"),a("2fdb"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{ref:"table"},[e._t("default")],2)])}),ne=[],re=a("e325"),oe=(a("2bd6"),{name:"TabulatorTable",props:{table_data:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},initialSort:{type:Array,default:function(){return[]}},layout:{type:String,default:"fitData"},layoutColumnsOnNewData:{type:Boolean,default:!0},height:{type:String,default:"100%"}},watch:{table_data:{handler:function(e){this.tabulator.setData(e)},deep:!0},columns:{handler:function(e){this.tabulator.setColumns(e),this.tabulator.setSort(e)},deep:!0}},beforeCreate:function(){this.tabulator=null},mounted:function(){var e=this.table_data,t=this.columns,a=this.initialSort,s=this.layout,n=this.layoutColumnsOnNewData,r=this.height;this.tabulator=new re["a"](this.$refs.table,{data:e,columns:t,initialSort:a,layout:s,layoutColumnsOnNewData:n,height:r}),this.$emit("connected",this.tabulator)}}),ie=oe,le=a("2877"),ce=Object(le["a"])(ie,se,ne,!1,null,null,null),ue=ce.exports;function de(e,t){var a=e.getValue();return"number"!==typeof a?null:m["a"].TransformationFunctions.get("scinotation")(a)}var _e={name:"ExportData",components:{TabulatorTable:ue},props:{study_names:{type:Array,default:function(){return[]}},has_credible_sets:{type:Boolean,default:!0},table_data:{type:Array,default:function(){return[]}}},data:function(){return{selected_study:"",export_type:"top_hits"}},computed:{source_name:function(){return M(this.selected_study||"")},table_config:function(){var e=[{title:"Chrom",field:"chromosome"},{title:"Pos",field:"position",sorter:"number"},{title:"Ref",field:"ref_allele"},{title:"Alt",field:"alt_allele"},{title:"rsID",field:"rsid"},{title:"-log<sub>10</sub>(p)",field:"log_pvalue",formatter:de,sorter:"number"},{title:"&beta;",field:"beta",formatter:"money",formatterParams:{precision:3},sorter:"number"},{title:"SE(&beta;)",field:"stderr_beta",formatter:"money",formatterParams:{precision:3},sorter:"number"},{title:"Alt freq.",field:"alt_allele_freq",formatter:"money",formatterParams:{precision:3},sorter:"number"}];return this.has_credible_sets&&e.push({title:"Cred. set",field:"is_member",formatter:"tickCross"},{title:"Posterior probability",field:"posterior_prob",formatter:de}),e}},watch:{source_name:function(){var e=this.source_name;if(this.study_names.includes(this.selected_study)){var t=["assoc_".concat(e,":chromosome"),"assoc_".concat(e,":position"),"assoc_".concat(e,":ref_allele"),"assoc_".concat(e,":alt_allele"),"assoc_".concat(e,":rsid"),"assoc_".concat(e,":log_pvalue"),"assoc_".concat(e,":alt_allele_freq"),"assoc_".concat(e,":beta"),"assoc_".concat(e,":stderr_beta")];this.has_credible_sets&&t.push("credset_".concat(e,":is_member"),"credset_".concat(e,":posterior_prob")),this.$emit("requested-data",t)}else this.$emit("requested-data",[])}},beforeCreate:function(){this.table=null},methods:{exportCSV:function(){this.table.download("csv","results_".concat(this.source_name,".csv"))}}},pe=_e,fe=Object(le["a"])(pe,te,ae,!1,null,"0f5c4c48",null),he=fe.exports,ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"lz-container-responsive",attrs:{id:e.dom_id}},[e._t("default")],2)])},me=[],be=a("3e6c"),ge=0,ye={name:"LzPlot",props:{base_layout:{type:Object,default:function(){return{}}},base_sources:{type:Array,default:function(){return[]}},chr:{type:String,default:null},start:{type:Number,default:null},end:{type:Number,default:null},show_loading:{type:Boolean,default:!1},dynamic_urls:{type:Boolean,default:!1}},computed:{region:function(){var e=this.chr,t=this.start,a=this.end;return{chr:e,start:t,end:a}}},watch:{region:{handler:function(){var e=this,t=Object.assign({},this.region),a=Object.keys(t).reduce((function(a,s){var n=t[s];return n!==e.plot.state[s]&&(a[s]=n),a}),{});Object.keys(a).length&&this.plot.applyState(a)},deep:!0}},beforeCreate:function(){ge+=1,this.dom_id="lz-plot-".concat(ge),this.plot_id=this.dom_id.replace(/-/g,"_"),this.plot=null,this.data_sources=null},mounted:function(){this.createLZ(this.base_layout,this.base_sources)},beforeDestroy:function(){this.plot.destroy(),delete this.plot,delete window[this.plot_id]},methods:{createLZ:function(e,t){var a=JSON.parse(JSON.stringify(e)),s=new m["a"].DataSources;t.forEach((function(e){var t=Object(k["a"])(e,2),a=t[0],n=t[1];return s.add(a,n)}));var n=m["a"].populate("#".concat(this.dom_id),s,a);this.show_loading&&n.layout.panels.forEach((function(e){return n.panels[e.id].addBasicLoader()})),this.plot=n,this.data_sources=s,window[this.plot_id]=n,this.connectListeners(n),this.$emit("connected")},connectListeners:function(e){var t=this;e.on("any_lz_event",(function(e){return t.$emit(e.event_name,e)})),this.dynamic_urls&&(Object(be["a"])(e,z),Object(be["b"])(e,z))},callPlot:function(e){return e(this.plot)},callSources:function(e){return e(this.data_sources)},addPanels:function(e,t){F(this.plot,this.data_sources,e,t)}}},we=ye,Ce=Object(le["a"])(we,ve,me,!1,null,null,null),xe=Ce.exports,ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.variant_name&&e.rendered?a("div",[a("h3",[e._v("Known PheWAS Results: "+e._s(e.variant_name))]),a("p",[e._v("\n      In your study "),a("em",{staticStyle:{"word-break":"break-word"}},[e._v(e._s(e.your_study))]),e._v(", this variant has a\n      "),a("span",{staticClass:"text-muted definition",attrs:{title:"p-value "+e.display_pvalue}},[e._v("\n        -log"),a("sub",[e._v("10")]),e._v(" p-value of "),a("strong",[e._v(e._s(e.display_logpvalue))])]),e._v(". Below are other\n      results for comparison.\n    ")]),a("lz-plot",{ref:"phewas_plot",attrs:{base_layout:e.base_phewas_layout,base_sources:e.base_phewas_sources,show_loading:!0},on:{connected:e.receivePlot}})],1):a("p",[e._v("\n    Please select a variant in order to generate a PheWAS plot. You can click on any scatter plot\n    point in an association track.\n  ")]),e._m(0)])},Se=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("\n    PheWAS results are drawn from a large-scale analysis of the UK Biobank dataset, as described in\n    "),a("a",{attrs:{href:"https://doi.org/10.1038/s41588-018-0184-y"}},[e._v("Nature Genetics volume 50, pages 1335–1341 (2018)")]),e._v(".\n  ")])}],Pe=(a("fca0"),{name:"PhewasMaker",components:{LzPlot:xe},props:{variant_name:{type:String,default:""},build:{type:String,default:"GRCh37"},your_study:{type:String,default:""},your_logpvalue:{type:Number,default:null},allow_render:{type:Boolean,default:!0}},data:function(){return{rendered:this.allow_render}},computed:{display_logpvalue:function(){return m["a"].TransformationFunctions.get("scinotation")(this.your_logpvalue)},display_pvalue:function(){var e=this.your_logpvalue;return Number.isFinite(e)?m["a"].TransformationFunctions.get("scinotation")(Math.pow(10,-e)):0},base_phewas_layout:function(){var e=m["a"].Layouts.get("data_layer","phewas_pvalues",{unnamespaced:!0,y_axis:{min_extent:[0,10]}}),t=m["a"].Layouts.get("panel","phewas",{unnamespaced:!0,height:300,min_height:300,data_layers:[e]});return m["a"].Layouts.get("plot","standard_phewas",{panels:[t],responsive_resize:!0,state:{variant:this.variant_name,genome_build:this.build}})},base_phewas_sources:function(){return[["phewas",["PheWASLZ",{url:"https://portaldev.sph.umich.edu/ukbb/v1/statistic/phewas/"}]]]},render_trigger:function(){return this.allow_render,this.variant_name}},watch:{allow_render:function(e){var t=this.variant_name;e&&t&&(this.rendered=!0),this.has_plot&&t&&(this.$refs.phewas_plot.callPlot((function(e){return e.curtain.hide()})),this.$refs.phewas_plot.callPlot((function(e){return e.applyState({variant:t})})))}},beforeCreate:function(){this.has_plot=!1},methods:{callPlot:function(e){this.has_plot&&this.$refs.phewas_plot.callPlot(e)},receivePlot:function(){this.has_plot=!0,this.$refs.phewas_plot.callPlot((function(e){e.subscribeToData(["phewas:id"],(function(e,t){e&&e.length||t.curtain.show("There is no PheWAS data available for the requested variant. Please try another variant.")}))})),this.$refs.phewas_plot.callPlot((function(e){return e.emit("data_rendered")}))}}}),Oe=Pe,Ae=(a("f61e"),Object(le["a"])(Oe,ke,Se,!1,null,"14bef7dd",null)),je=Ae.exports,Ee=Object.freeze({PLOT:0,PHEWAS:1,EXPORT:2}),qe={name:"PlotPanes",components:{ExportData:he,LzPlot:xe,PhewasMaker:je,BCard:l["a"],BTab:Q["a"],BTabs:ee["a"]},props:{assoc_layout:{type:Object,default:function(){return{}}},assoc_sources:{type:Array,default:function(){return[]}},study_names:{type:Array,default:function(){return[]}},chr:{type:String,default:null},start:{type:Number,default:null},end:{type:Number,default:null},build:{type:String,default:"GRCh37"},dynamic_urls:{type:Boolean,default:!1},has_credible_sets:{type:Boolean,default:!0}},data:function(){return{selected_tab:0,tmp_phewas_study:null,tmp_phewas_variant:null,tmp_phewas_logpvalue:null,tmp_export_callback:null,table_data:[]}},computed:{allow_phewas:function(){return"GRCh37"===this.build},has_studies:function(){return!!this.study_names.length}},beforeCreate:function(){this.TABS=Ee,this.has_plot=!1},methods:{receivePlot:function(){this.has_plot=!0,this.$emit("plot-created")},addStudy:function(e,t){this.$refs.assoc_plot.addPanels(e,t)},onVariantClick:function(e){var t=e.sourceID;if(-1!==t.indexOf("association_")){var a=Z(e.data,"assoc");this.tmp_phewas_study=t.split(".")[1].replace(/^association_/,""),this.tmp_phewas_variant=a.variant,this.tmp_phewas_logpvalue=a.log_pvalue}},subscribeFields:function(e){var t=this;this.tmp_export_callback&&(this.$refs.assoc_plot.callPlot((function(e){return e.off("data_rendered",t.tmp_export_callback)})),this.tmp_export_callback=null),e.length&&this.has_plot&&(this.tmp_export_callback=this.$refs.assoc_plot.callPlot((function(a){a.subscribeToData(e,(function(e){t.table_data=e.map((function(e){return Z(e,"assoc")}))}))})),this.$refs.assoc_plot.callPlot((function(e){return e.emit("data_rendered")})))},fixDimensions:function(e){var t=this,a=this.TABS;e===a.PHEWAS?this.$nextTick((function(){return t.$refs.phewas.callPlot((function(e){return e.rescaleSVG()}))})):e===a.PLOT&&this.$nextTick((function(){return t.$refs.assoc_plot.callPlot((function(e){return e.rescaleSVG()}))}))}}},Ne=qe,Le=(a("a8b7"),Object(le["a"])(Ne,K,X,!1,null,null,null)),$e=Le.exports,Re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row"},[e.batch_mode_active?e._e():a("div",{staticClass:"col-sm-6"},[e.study_count<e.max_studies?a("div",[a("tabix-file",{staticClass:"mr-1",on:{ready:e.connectReader,fail:e.showMessage}}),a("b-dropdown",{attrs:{text:"Add from URL",variant:"success"}},[a("div",{staticClass:"px-3"},[a("tabix-url",{on:{ready:e.connectReader,fail:e.showMessage}})],1)]),e.show_modal?a("adder-wizard",{attrs:{file_reader:e.file_reader,file_name:e.display_name},on:{"update:file_name":function(t){e.display_name=t},ready:e.sendConfig,close:function(t){e.show_modal=!1}}}):e._e()],1):e._e()]),e.batch_mode_active?e._e():a("div",{staticClass:"col-sm-6"},[e.study_count?a("div",{staticClass:"d-flex justify-content-end"},[a("region-picker",{attrs:{build:e.build,max_range:e.max_region_size,search_url:"https://portaldev.sph.umich.edu/api/v1/annotation/omnisearch/"},on:{ready:e.selectRange,fail:e.showMessage}}),a("batch-spec",{staticClass:"ml-1",attrs:{max_range:e.max_region_size},on:{ready:e.activateBatchMode}})],1):a("b-dropdown",{staticClass:"float-right",attrs:{text:"Plot options",variant:"info"}},[a("div",{staticClass:"px-3"},[a("strong",[e._v("Annotations")]),a("br"),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.has_catalog,expression:"has_catalog"}],staticClass:"form-check-input",attrs:{id:"show-catalog",type:"checkbox"},domProps:{checked:Array.isArray(e.has_catalog)?e._i(e.has_catalog,null)>-1:e.has_catalog},on:{change:function(t){var a=e.has_catalog,s=t.target,n=!!s.checked;if(Array.isArray(a)){var r=null,o=e._i(a,r);s.checked?o<0&&(e.has_catalog=a.concat([r])):o>-1&&(e.has_catalog=a.slice(0,o).concat(a.slice(o+1)))}else e.has_catalog=n}}}),a("label",{staticClass:"form-check-label",attrs:{for:"show-catalog"}},[e._v("GWAS Catalog")])]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.has_credible_sets,expression:"has_credible_sets"}],staticClass:"form-check-input",attrs:{id:"show-credible-set",type:"checkbox"},domProps:{checked:Array.isArray(e.has_credible_sets)?e._i(e.has_credible_sets,null)>-1:e.has_credible_sets},on:{change:function(t){var a=e.has_credible_sets,s=t.target,n=!!s.checked;if(Array.isArray(a)){var r=null,o=e._i(a,r);s.checked?o<0&&(e.has_credible_sets=a.concat([r])):o>-1&&(e.has_credible_sets=a.slice(0,o).concat(a.slice(o+1)))}else e.has_credible_sets=n}}}),a("label",{staticClass:"form-check-label",attrs:{for:"show-credible-set"}},[e._v("95% credible set")])]),a("strong",[e._v("Genome Build")]),a("br"),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.build,expression:"build"}],staticClass:"form-check-input",attrs:{id:"build-37",type:"radio",name:"build",value:"GRCh37"},domProps:{checked:e._q(e.build,"GRCh37")},on:{change:function(t){e.build="GRCh37"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"build-37"}},[e._v("GRCh37")])]),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.build,expression:"build"}],staticClass:"form-check-input",attrs:{id:"build-38",type:"radio",name:"build",value:"GRCh38"},domProps:{checked:e._q(e.build,"GRCh38")},on:{change:function(t){e.build="GRCh38"}}}),a("label",{staticClass:"form-check-label",attrs:{for:"build-38"}},[e._v("GRCh38")])])])])],1),e.batch_mode_active?a("div",{staticClass:"col-md-12"},[a("batch-scroller",{attrs:{regions:e.batch_mode_regions},on:{navigate:e.selectRange,cancel:function(t){e.batch_mode_active=!1}}})],1):e._e(),e.message?a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("span",{class:[e.message_class]},[e._v(e._s(e.message))])])]):e._e()])])},Te=[],Be=a("dd9a"),ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"modal-container"},[a("div",{staticClass:"modal-header"},[a("h3",[e._v("Select file options...")]),a("button",{staticClass:"pull-right",attrs:{"aria-label":"close"},on:{click:function(t){return e.$emit("close")}}},[e._v("X\n          ")])]),a("div",{staticClass:"modal-body"},[a("div",[e.current_page===e.PAGES.filename?a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-3",attrs:{for:"display_name"}},[e._v("Dataset Label")]),a("div",{staticClass:"col-sm-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.file_name,expression:"file_name"}],staticClass:"form-control",attrs:{id:"display_name",type:"text"},domProps:{value:e.file_name},on:{input:function(t){t.target.composing||(e.file_name=t.target.value)}}})])]):e.current_page===e.PAGES.variant?a("div",[a("b-tabs",{model:{value:e.variant_spec_tab,callback:function(t){e.variant_spec_tab=t},expression:"variant_spec_tab"}},[a("b-tab",{staticClass:"pt-3",attrs:{title:"Variant from columns"}},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2",attrs:{for:"vs-chr"}},[e._v("Chromosome")]),a("div",{staticClass:"col-sm-4"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.chrom_col,expression:"chrom_col"}],staticClass:"form-control",attrs:{id:"vs-chr"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.chrom_col=t.target.multiple?a:a[0]}}},e._l(e.column_titles,(function(t,s){return a("option",{key:s,domProps:{value:s+1}},[e._v("\n                          "+e._s(t)+"\n                        ")])})),0)]),a("label",{staticClass:"col-sm-2",attrs:{for:"vs-pos"}},[e._v("Position")]),a("div",{staticClass:"col-sm-4"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.pos_col,expression:"pos_col"}],staticClass:"form-control",attrs:{id:"vs-pos"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.pos_col=t.target.multiple?a:a[0]}}},e._l(e.column_titles,(function(t,s){return a("option",{key:s,domProps:{value:s+1}},[e._v("\n                          "+e._s(t)+"\n                        ")])})),0)])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2",attrs:{for:"vs-ref"}},[e._v("Ref allele")]),a("div",{staticClass:"col-sm-4"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.ref_col,expression:"ref_col"}],staticClass:"form-control",attrs:{id:"vs-ref"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.ref_col=t.target.multiple?a:a[0]}}},e._l(e.column_titles,(function(t,s){return a("option",{key:s,domProps:{value:s+1}},[e._v("\n                          "+e._s(t)+"\n                        ")])})),0)]),a("label",{staticClass:"col-sm-2",attrs:{for:"vs-alt"}},[e._v("Alt allele")]),a("div",{staticClass:"col-sm-4"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.alt_col,expression:"alt_col"}],staticClass:"form-control",attrs:{id:"vs-alt"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.alt_col=t.target.multiple?a:a[0]}}},e._l(e.column_titles,(function(t,s){return a("option",{key:s,domProps:{value:s+1}},[e._v("\n                          "+e._s(t)+"\n                        ")])})),0)])])]),a("b-tab",{staticClass:"pt-3",attrs:{title:"Variant from marker"}},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2",attrs:{for:"vs-marker"}},[e._v("Marker")]),a("div",{staticClass:"col-sm-4"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.marker_col,expression:"marker_col"}],staticClass:"form-control",attrs:{id:"vs-marker"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.marker_col=t.target.multiple?a:a[0]}}},e._l(e.column_titles,(function(t,s){return a("option",{key:s,domProps:{value:s+1}},[e._v("\n                          "+e._s(t)+"\n                        ")])})),0)])])])],1),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2",attrs:{for:"vs-pval"}},[e._v("P-value column")]),a("div",{staticClass:"col-sm-4"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.pvalue_col,expression:"pvalue_col"}],staticClass:"form-control",attrs:{id:"vs-pval"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.pvalue_col=t.target.multiple?a:a[0]}}},e._l(e.column_titles,(function(t,s){return a("option",{key:s,domProps:{value:s+1}},[e._v("\n                      "+e._s(t)+"\n                    ")])})),0)]),a("div",{staticClass:"col-sm-2"},[a("label",{staticClass:"form-check-label",staticStyle:{"white-space":"nowrap"},attrs:{for:"is_neg_log_pvalue"}},[e._v("\n                    is "),a("em",[e._v("-log"),a("sub",[e._v("10")]),e._v("(p)")])])]),a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-check float-left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.is_neg_log_pvalue,expression:"is_neg_log_pvalue"}],staticClass:"form-check-input",attrs:{id:"is_neg_log_pvalue",type:"checkbox"},domProps:{checked:Array.isArray(e.is_neg_log_pvalue)?e._i(e.is_neg_log_pvalue,null)>-1:e.is_neg_log_pvalue},on:{change:function(t){var a=e.is_neg_log_pvalue,s=t.target,n=!!s.checked;if(Array.isArray(a)){var r=null,o=e._i(a,r);s.checked?o<0&&(e.is_neg_log_pvalue=a.concat([r])):o>-1&&(e.is_neg_log_pvalue=a.slice(0,o).concat(a.slice(o+1)))}else e.is_neg_log_pvalue=n}}})])])])],1):e.current_page===e.PAGES.optional?a("div",[a("h3",[e._v("Optional fields")]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2",attrs:{for:"vs-beta"}},[e._v("Effect size")]),a("div",{staticClass:"col-sm-4"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.beta_col,expression:"beta_col"}],staticClass:"form-control",attrs:{id:"vs-beta"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.beta_col=t.target.multiple?a:a[0]}}},e._l(e.column_titles,(function(t,s){return a("option",{key:s,domProps:{value:s+1}},[e._v("\n                      "+e._s(t)+"\n                    ")])})),0)]),a("div",{staticClass:"col-sm-6"})]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2",attrs:{for:"vs-stderr"}},[e._v("Std. Err.")]),a("div",{staticClass:"col-sm-4"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.stderr_beta_col,expression:"stderr_beta_col"}],staticClass:"form-control",attrs:{id:"vs-stderr"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.stderr_beta_col=t.target.multiple?a:a[0]}}},e._l(e.column_titles,(function(t,s){return a("option",{key:s,domProps:{value:s+1}},[e._v("\n                      "+e._s(t)+"\n                    ")])})),0)])]),a("h4",[e._v("Allele Frequency")]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2"},[e._v("Effect allele")]),a("div",{staticClass:"col-sm-10"},[a("b-form-radio",{attrs:{value:!1,inline:""},model:{value:e.is_alt_effect,callback:function(t){e.is_alt_effect=t},expression:"is_alt_effect"}},[e._v("Ref")]),a("b-form-radio",{attrs:{value:!0,inline:""},model:{value:e.is_alt_effect,callback:function(t){e.is_alt_effect=t},expression:"is_alt_effect"}},[e._v("Alt")])],1)]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2"},[e._v("Specify from")]),a("div",{staticClass:"col-sm-10"},[a("b-form-radio",{attrs:{value:e.AF_SPEC.freq,inline:""},model:{value:e.freq_spec_option,callback:function(t){e.freq_spec_option=t},expression:"freq_spec_option"}},[e._v("Frequency")]),a("b-form-radio",{attrs:{value:e.AF_SPEC.count,inline:""},model:{value:e.freq_spec_option,callback:function(t){e.freq_spec_option=t},expression:"freq_spec_option"}},[e._v("Counts")])],1)]),e.freq_spec_option===e.AF_SPEC.freq?a("div",[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2",attrs:{for:"vs-af-freq"}},[e._v("Frequency")]),a("div",{staticClass:"col-sm-4"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.allele_freq_col,expression:"allele_freq_col"}],staticClass:"form-control",attrs:{id:"vs-af-freq"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.allele_freq_col=t.target.multiple?a:a[0]}}},e._l(e.column_titles,(function(t,s){return a("option",{key:s,domProps:{value:s+1}},[e._v("\n                        "+e._s(t)+"\n                      ")])})),0)]),a("div",{staticClass:"col-sm-6"})])]):e.freq_spec_option===e.AF_SPEC.count?a("div",[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-2",attrs:{for:"vs-af-count"}},[e._v("Count")]),a("div",{staticClass:"col-sm-4"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.allele_count_col,expression:"allele_count_col"}],staticClass:"form-control",attrs:{id:"vs-af-count"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.allele_count_col=t.target.multiple?a:a[0]}}},e._l(e.column_titles,(function(t,s){return a("option",{key:s,domProps:{value:s+1}},[e._v("\n                        "+e._s(t)+"\n                      ")])})),0)]),a("label",{staticClass:"col-sm-2",attrs:{for:"vs-af-ns"}},[e._v("# Samples")]),a("div",{staticClass:"col-sm-4"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.n_samples_col,expression:"n_samples_col"}],staticClass:"form-control",attrs:{id:"vs-af-ns"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.n_samples_col=t.target.multiple?a:a[0]}}},e._l(e.column_titles,(function(t,s){return a("option",{key:s,domProps:{value:s+1}},[e._v("\n                        "+e._s(t)+"\n                      ")])})),0)])])]):a("div",[a("span",{staticClass:"text-muted"},[e._v("\n                  Please select a frequency option in order to use this feature\n                ")])])]):e._e(),a("div",{staticClass:"row"},[a("div",{staticClass:"card card-body bg-light"},[e.isValid&&e.preview.error?a("div",[a("span",{staticClass:"text-danger"},[e._v(e._s(e.preview.error))])]):e.isValid?a("div",[a("table",{staticClass:"preview-table"},[a("tr",[a("td",[e._v("Variant")]),a("td",[e._v(e._s(e.preview.variant))])]),a("tr",[a("td",[e._v("-log"),a("sub",[e._v("10")]),e._v("(p)")]),a("td",[e._v(e._s(e.preview.log_pvalue.toFixed(3)))])]),a("tr",[a("td",[e._v("β")]),a("td",[e._v(e._s(e.preview.beta?e.preview.beta.toFixed(3):""))])]),a("tr",[a("td",[e._v("SE(β)")]),a("td",[e._v(e._s(e.preview.stderr_beta?e.preview.stderr_beta.toFixed(3):""))])]),a("tr",[a("td",[e._v("Allele freq")]),a("td",[e._v("\n                        "+e._s(e.preview.alt_allele_freq?e.preview.alt_allele_freq.toFixed(3):"")+"\n                      ")])])])]):a("div",[e._v("\n                  Please select options to preview parsed data.\n                ")])])]),a("div",{staticClass:"row mt-3"},[e.current_page===e.PAGES.optional?a("button",{staticClass:"btn btn-success ml-auto",attrs:{disabled:!e.isValid},on:{click:e.sendOptions}},[e._v("\n                Accept options\n              ")]):a("button",{staticClass:"btn btn-success ml-auto",attrs:{disabled:!e.isValid},on:{click:function(t){e.current_page+=1}}},[e._v("Next\n              ")])])])])])])])])},Ge=[],Me=(a("20d6"),a("6b54"),a("8226")),De=a("9e14");a("6c7b");function We(e){return!!S.has(e)||!Number.isNaN(+e)}function Fe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.comment_char,s=void 0===a?"#":a,n=t.delimiter,r=void 0===n?"\t":n;return e.startsWith(s)||e.split(r).every((function(e){return!We(e)}))}function Ie(e,t){for(var a=Array(t.length+1).fill(null).map((function(){return Array(e.length+1).fill(null)})),s=0;s<=e.length;s+=1)a[0][s]=s;for(var n=0;n<=t.length;n+=1)a[n][0]=n;for(var r=1;r<=t.length;r+=1)for(var o=1;o<=e.length;o+=1){var i=e[o-1]===t[r-1]?0:1;a[r][o]=Math.min(a[r][o-1]+1,a[r-1][o]+1,a[r-1][o-1]+i)}return a[t.length][e.length]}function Ve(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,s=a+1,n=null,r=function(a){var r=t[a];if(null===r)return"continue";var o=Math.min.apply(Math,Object(d["a"])(e.map((function(e){return Ie(r,e)}))));o<s&&(s=o,n=a)},o=0;o<t.length;o++)r(o);return n}function Ze(e,t){var a,s=["neg_log_pvalue","log_pvalue","log_pval","logpvalue"],n=["pvalue","p.value","p-value","pval","p_score","p"],r=function(e,t,s){var n=j(t.map((function(t){return t[e]})));try{a=n.map((function(e){return q(e,s)}))}catch(r){return!1}return a.every((function(e){return!Number.isNaN(e)}))},o=Ve(s,e),i=Ve(n,e);return null!==o&&r(o,t,!0)?{pvalue_col:o+1,is_neg_log_pvalue:!0}:i&&r(i,t,!1)?{pvalue_col:i+1,is_neg_log_pvalue:!1}:null}function Ue(e,t){var a=["snpid","marker","markerid","snpmarker","chr:position"],s=["chrom","chr"],n=["position","pos","begin","beg","bp","end","ps"],r=["A1","ref","reference","allele0","allele1"],o=["A2","alt","alternate","allele1","allele2"],i=t[0],l=Ve(a,e);if(null!==l&&E(i[l],!0))return l+=1,{marker_col:l};for(var c=e.slice(),u=[["chrom_col",s],["pos_col",n],["ref_col",r],["alt_col",o]],d={},_=0;_<u.length;_++){var p=Object(k["a"])(u[_],2),f=p[0],h=p[1],v=Ve(h,c);if(null===v)return null;d[f]=v+1,c[v]=null}return d}function He(e,t){var a=["beta","effect_size","alt_effsize","effect"],s=["stderr_beta","stderr","sebeta","effect_size_sd","se"];function n(e,t){var a,s=j(t.map((function(t){return t[e]})));try{a=s.filter((function(e){return null!==e})).map((function(e){return+e}))}catch(n){return!1}return a.every((function(e){return!Number.isNaN(e)}))}var r=Ve(a,e,0),o=Ve(s,e,0),i={};return null!==r&&n(r,t)&&(i.beta_col=r+1),null!==o&&n(o,t)&&(i.stderr_beta_col=o+1),i}function Je(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=e.map((function(e){return e?e.toLowerCase():e}));s[0].replace("/^#+/","");var n=Ze(s,t,a);if(!n)return null;s[n.pvalue_col-1]=null;var r=Ue(s,t);if(!r)return null;Object.keys(r).forEach((function(e){s[r[e]]=null}));var o=He(s,t);return n&&r?Object.assign({},n,r,o||{}):null}var Ye=0,Ke=1,Xe={freq:1,count:2},Qe={filename:0,variant:1,optional:2},et={name:"AdderWizard",components:{BFormGroup:Me["a"],BFormRadio:De["a"],BTab:Q["a"],BTabs:ee["a"]},props:{file_reader:{type:Object,default:null},file_name:{type:String,default:null}},data:function(){return{column_titles:[],sample_data:[],current_page:this.filename?Qe.filename:Qe.variant,variant_spec_tab:Ye,freq_spec_option:null,marker_col:null,chrom_col:this.file_reader.colSeq||null,pos_col:this.file_reader.colStart||null,ref_col:null,alt_col:null,pvalue_col:null,is_neg_log_pvalue:!1,beta_col:null,stderr_beta_col:null,allele_freq_col:null,allele_count_col:null,n_samples_col:null,is_alt_effect:null}},computed:{freqSpec:function(){var e=this.freq_spec_option,t=this.allele_freq_col,a=this.allele_count_col,s=this.n_samples_col,n=this.is_alt_effect,r={is_alt_effect:n},o=null!==n;return e===Xe.freq?(o=o&&A(t),r.allele_freq_col=t):e===Xe.count&&(o=o&&A(a)&&A(s),r.allele_count_col=a,r.n_samples_col=s),o?r:{}},variantSpec:function(){var e=this.marker_col,t=this.chrom_col,a=this.pos_col,s=this.ref_col,n=this.alt_col;if(this.variant_spec_tab===Ke&&A(e))return{marker_col:e};if(this.variant_spec_tab===Ye&&A(a)&&A(t)){var r={chrom_col:t,pos_col:a};return A(s)&&A(n)&&Object.assign(r,{ref_col:s,alt_col:n}),r}return{}},parserOptions:function(){var e=this.pvalue_col,t=this.is_neg_log_pvalue,a=this.beta_col,s=this.stderr_beta_col;return Object.assign({},{pvalue_col:e,is_neg_log_pvalue:t,beta_col:a,stderr_beta_col:s},this.variantSpec,this.freqSpec)},isValid:function(){var e=0!==Object.keys(this.variantSpec).length,t=A(this.parserOptions.pvalue_col);return e&&t},parser:function(){if(this.isValid)try{return L(this.parserOptions)}catch(e){return function(){throw new Error("Invalid parser configuration")}}return function(){}},preview:function(){try{return this.parser(this.sample_data[0])}catch(e){return console.error(e),{error:e.toString()||"Could not parse column contents"}}}},watch:{file_reader:{immediate:!0,handler:function(){var e=this,t=function(t,a){var s;s=e.file_reader.skip?e.file_reader.skip:t.findIndex((function(e){return!Fe(e)})),e.sample_data=t.slice(s);var n=e.sample_data.map((function(e){return e.split("\t")}));if(s>0){e.column_titles=t[s-1].replace(/^#+/g,"").split("\t");var r=Je(e.column_titles,n);r&&(Object.assign(e,r),e.variant_spec_tab=A(r.marker_col)?Ke:Ye)}else{var o=t.length?t[0].split("\t").length:0;e.column_titles=Object(d["a"])(new Array(o)).map((function(e,t){return"Column ".concat(t+1)}))}};this.file_reader.fetchHeader(t,{nLines:30,metaOnly:!1})}}},beforeCreate:function(){this.PAGES=Qe,this.AF_SPEC=Xe},mounted:function(){var e=this;document.body.addEventListener("keyup",(function(t){"Escape"===t.key&&e.$emit("close")}))},methods:{sendOptions:function(){var e=this.preview.position,t={chr:this.preview.chromosome,start:Math.max(0,e-25e4),end:e+25e4};this.$emit("ready",Object.assign({},this.parserOptions),t),this.$emit("close")}}},tt=et,at=(a("5943"),Object(le["a"])(tt,ze,Ge,!1,null,"13992d17",null)),st=at.exports,nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-dropdown",{ref:"dropdown",attrs:{variant:"info",right:"",text:"Batch view"}},[a("div",{staticClass:"px-3"},[a("label",{attrs:{for:"batch-region-list"}},[e._v("Specify regions to plot (one per line):")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.region_text,expression:"region_text"}],attrs:{id:"batch-region-list",rows:"10",placeholder:"chr:start-end or chr:pos"},domProps:{value:e.region_text},on:{input:function(t){t.target.composing||(e.region_text=t.target.value)}}}),e.message?a("div",{staticClass:"text-danger"},[e._v(e._s(e.message))]):e._e(),a("div",{staticClass:"d-flex justify-content-end align-items-center"},[e.show_loader?a("div",{staticClass:"d-flex align-items-center spinner-border   text-secondary mr-1",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[e._v("Loading...")])]):e._e(),e._t("preset-button",null,{updateRegions:e.updateRegions}),a("button",{staticClass:"btn btn-success ml-1",on:{click:e.sendRegions}},[e._v("Go")])],2)])])],1)},rt=[];function ot(e,t){var a=t.region_size,s=void 0===a?5e5:a,n=Math.floor(s/2);return[Math.max(e-n,1),e+n]}function it(e,t){var a,s,n,r=t.region_size,o=void 0===r?5e5:r,i=e.match(x),l=e.match(C);if(i){var c=i.slice(1),u=Object(k["a"])(c,3);a=u[0],s=u[1],n=u[2],s=+s,n=+n}else{if(!l)throw new Error("Could not parse the specified range: ".concat(e));var d,_=l.slice(1),p=Object(k["a"])(_,2);a=p[0],d=p[1],d=+d;var f=ot(d,{region_size:o}),h=Object(k["a"])(f,2);s=h[0],n=h[1]}if(o&&n-s>o)throw new Error("Maximum allowable range is ".concat(o.toLocaleString()," bp"));if(n<s)throw new Error("The requested end position ".concat(n.toLocaleString()," is smaller than the requested start position ").concat(s.toLocaleString()));return{chr:a,start:s,end:n}}var lt={name:"BatchSpec",components:{BDropdown:Be["a"]},props:{max_range:{type:Number,default:null}},data:function(){return{region_text:"",show_loader:!1,message:null}},methods:{getRegionsFromTextBox:function(){var e=this,t=this.region_text.trim().split(/\r?\n/).filter((function(e){return!!e}));return t.map((function(t){return it(t,{region_size:e.max_range})}))},validateRegions:function(e){return!!e.length},updateRegions:function(e){var t=this;this.show_loader=!0,Promise.resolve(e).then((function(e){return e.map((function(e){var t=e.chr,a=e.start,s=e.end;return"".concat(t,":").concat(a,"-").concat(s)})).join("\n")})).then((function(e){t.region_text=e})).catch((function(e){t.message="Unable to retrieve items"})).finally((function(){t.show_loader=!1}))},sendRegions:function(){var e;try{e=this.getRegionsFromTextBox()}catch(t){return void(this.message=t.toString())}e.length?(this.message="",this.$emit("ready",e),this.$refs.dropdown.hide()):this.message="Must specify at least one region"}}},ct=lt,ut=Object(le["a"])(ct,nt,rt,!1,null,"5040e45f",null),dt=ut.exports,_t=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"alert-success d-flex justify-content-between align-items-center"},[a("button",{staticClass:"btn btn-link",attrs:{disabled:e.current_index<=0},on:{click:function(t){return e.goToItem(-1)}}},[e._v("< Prev")]),a("span",[e._v("\n    Current Locus: "+e._s(e.current_region_display)+" -\n    "),null!==e.current_index?a("span",[e._v("\n      ("+e._s(e.current_index+1)+" of "+e._s(e.regions.length)+") -\n    ")]):e._e(),a("button",{staticClass:"btn btn-link p-0 border-0 align-bottom",attrs:{title:"Cancel navigation"},on:{click:e.cancelNavigation}},[e._v("cancel batch mode")])]),a("button",{staticClass:"btn btn-link",attrs:{disabled:null!==e.current_index&&e.current_index>=e.regions.length-1},on:{click:function(t){return e.goToItem(1)}}},[e._v("Next >")])])},pt=[],ft={name:"BatchScroller",props:{regions:{type:Array,default:function(){return[]}}},data:function(){return{current_index:null}},computed:{current_region:function(){return null===this.current_index?null:this.regions[this.current_index]},current_region_display:function(){var e=this.current_region;if(!e)return"(none)";var t=e.chr,a=e.start,s=e.end;return"".concat(t,": ").concat(a.toLocaleString(),"-").concat(s.toLocaleString())}},methods:{cancelNavigation:function(){this.$emit("cancel")},goToItem:function(e){null===this.current_index?this.current_index=0:this.current_index+=e,this.$emit("navigate",this.current_region)}}},ht=ft,vt=Object(le["a"])(ht,_t,pt,!1,null,"bc1573d0",null),mt=vt.exports,bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-inline"},[a("vue-bootstrap-typeahead",{attrs:{data:e.search_results,serializer:function(e){return e.term},"min-matching-chars":3,placeholder:"chr:start-end, rs, or gene"},model:{value:e.region,callback:function(t){e.region=t},expression:"region"}}),a("button",{staticClass:"btn btn-primary",on:{click:e.selectRegion}},[e._v("Go to region")])],1)},gt=[],yt=(a("7514"),a("2ef0")),wt=a("d45f"),Ct={name:"RegionPicker",components:{VueBootstrapTypeahead:wt["a"]},props:{max_range:{type:Number,default:5e5},search_url:{type:String,default:"https://portaldev.sph.umich.edu/api/v1/annotation/omnisearch/"},build:{type:String,required:!0}},data:function(){return{region:null,search_results:[]}},watch:{region:Object(yt["debounce"])((function(){this.doSearch()}),500)},methods:{selectRegion:function(){var e=this,t=this.max_range;if(this.region){var a,s,n,r=this.search_results.find((function(t){return e.region===t.term}));if(r){a=r.chrom,s=r.start,n=r.end;var o=ot((s+n)/2,{region_size:t}),i=Object(k["a"])(o,2);s=i[0],n=i[1]}else try{var l=it(this.region,{region_size:t});a=l.chr,s=l.start,n=l.end}catch(c){return void this.$emit("fail",c)}this.$emit("ready",{chr:a,start:s,end:n})}else this.$emit("fail","Please specify a region")},doSearch:function(){var e=this;this.search_results=[];var t="".concat(this.search_url,"?q=").concat(encodeURIComponent(this.region),"&build=").concat(encodeURIComponent(this.build));fetch(t).then((function(e){if(e.ok)return e.json();throw new Error("Server error")})).then((function(t){e.search_results=t.data.filter((function(e){return!e.error&&"region"!==e.type}))})).catch((function(){return e.$emit("fail","Could not perform the specified search")}))}}},xt=Ct,kt=Object(le["a"])(xt,bt,gt,!1,null,"fecc3e0c",null),St=kt.exports,Pt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("label",{staticClass:"btn btn-success mb-0",attrs:{for:"file-picker"}},[e._v("Add a file...")]),a("input",{staticStyle:{opacity:"0",width:"0",height:"0"},attrs:{id:"file-picker",type:"file",multiple:"",accept:"application/gzip,.tbi"},on:{change:function(t){return e.addSource(t)}}})])},Ot=[],At=(a("7f7f"),a("aef6"),a("1d63")),jt={methods:{addSource:function(e){for(var t,a,s=this,n=e.target.files,r=0;r<n.length;r++){var o=n.item(r);o.name.endsWith(".tbi")?t=o:a=o}if(2===n.length&&t){var i=t.name.replace(/\.gz|\.tbi/gi,"");Object(At["a"])(a,t).then((function(e){s.$emit("ready",e,i)})).catch((function(e){s.$emit("fail",e)})).finally((function(){e.target.value=null}))}else s.$emit("fail","Must select two files: gzipped data and accompanying tabix index")}}},Et=jt,qt=Object(le["a"])(Et,Pt,Ot,!1,null,null,null),Nt=qt.exports,Lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-inline flex-nowrap"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.url,expression:"url",modifiers:{trim:!0}}],staticClass:"form-control mr-1",attrs:{type:"url",placeholder:"Specify a URL"},domProps:{value:e.url},on:{input:function(t){t.target.composing||(e.url=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),a("button",{staticClass:"btn btn-success",on:{click:e.addSource}},[e._v("Add")])])},$t=[],Rt={data:function(){return{url:""}},methods:{addSource:function(){var e=this,t="".concat(this.url,".tbi"),a=t.split("/").pop().replace(/\.gz|\.tbi/gi,"");Object(At["b"])(this.url,t).then((function(t){e.$emit("ready",t,a)})).catch((function(t){e.$emit("fail",t)}))}}},Tt=Rt,Bt=Object(le["a"])(Tt,Lt,$t,!1,null,null,null),zt=Bt.exports,Gt=1e6,Mt={name:"GwasToolbar",components:{BDropdown:Be["a"],AdderWizard:st,BatchScroller:mt,BatchSpec:dt,RegionPicker:St,TabixFile:Nt,TabixUrl:zt},props:{max_studies:{type:Number,default:3},study_names:{type:[Array,null],default:function(){return[]}}},data:function(){return{max_region_size:Gt,show_modal:!1,num_studies_added:0,message:"",message_class:"",file_reader:null,display_name:null,has_catalog:!0,has_credible_sets:!0,build:"GRCh37",batch_mode_active:!1,batch_mode_regions:[]}},computed:{study_count:function(){return this.study_names?this.study_names.length:this.num_studies_added}},methods:{reset:function(){this.file_reader=null,this.display_name=null,this.batch_mode_active=!1,this.batch_mode_regions=[],this.showMessage("","")},showMessage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text-danger";this.message=e,this.message_class=t},selectRange:function(e){this.showMessage("",""),this.$emit("select-range",e)},connectReader:function(e,t){this.study_names.includes(t)?this.showMessage("A study with this name has already been added to the plot"):(this.file_reader=e,this.display_name=t,this.show_modal=!0,this.showMessage(""))},activateBatchMode:function(e){this.batch_mode_active=!0,this.batch_mode_regions=e},sendConfig:function(e,t){this.num_studies_added+=1;var a={gwas_catalog:this.has_catalog,credible_sets:this.has_credible_sets},s=this.build;this.$emit("config-ready",{label:this.display_name,reader:this.file_reader,parser_config:e},{annotations:a,build:s,state:Object.assign({genome_build:this.build},t)}),this.reset()}}},Dt=Mt,Wt=Object(le["a"])(Dt,Re,Te,!1,null,null,null),Ft=Wt.exports,It={name:"LocalZoom",components:{GwasToolbar:Ft,BCollapse:i["a"],BCard:l["a"],PlotPanes:$e},directives:{VBToggle:c["a"]},data:function(){return{base_assoc_layout:null,base_assoc_sources:null,chr:null,start:null,end:null,build:null,study_names:[],has_credible_sets:!1}},methods:{receiveAssocOptions:function(e,t){var a=e.label,s=e.reader,n=e.parser_config,r=W(a,s,n),o=t.annotations,i=t.build,l=t.state,c=D(a,o,i);o.credible_sets&&(this.has_credible_sets=!0),this.updateRegion(l),this.study_names.length?this.$refs.plotWidget.addStudy(c,r):(this.base_assoc_sources=I(r),this.base_assoc_layout=V(l,c,{responsive_resize:!0}),Y()),this.study_names.push(a),this.build=i},activateMetrics:function(){this.$refs.plotWidget.$refs.assoc_plot.callPlot(U)},updateRegion:function(e){this.chr=e.chr,this.start=e.start,this.end=e.end}}},Vt=It,Zt=Object(le["a"])(Vt,r,o,!1,null,"cd7153c8",null),Ut=Zt.exports;n["init"]({dsn:"https://930af71733d64f58ab10d4184a90aee5@sentry.io/1353197",integrations:[new n["Integrations"].Vue({Vue:s["a"]})]}),new s["a"]({render:function(e){return e(Ut)}}).$mount("#app")},5943:function(e,t,a){"use strict";a("2b9b")},"95a0":function(e,t,a){},a8b7:function(e,t,a){"use strict";a("07d3")},f61e:function(e,t,a){"use strict";a("95a0")}});
//# sourceMappingURL=app.b0ad981b.js.map